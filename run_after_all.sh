#!/bin/bash
set -eo pipefail

if [[ -x "$(command -v mise)" ]]; then
	mise p up -y
	mise up -y
fi

if [[ -x "$(command -v bob)" ]]; then
	bob update --all
fi

UNAME=$(uname)
NUSHELL_SCRIPTS_PATH=~/.config/nushell/scripts/integrations

if [[ "$UNAME" == "Darwin" ]]; then
	NUSHELL_SCRIPTS_PATH=~/Library/Application\ Support/nushell/scripts/integrations
fi

# Update some autogenerated scripts
# HINT: https://unix.stackexchange.com/questions/45201/bash-what-does-do/45203#45203
atuin init nu >|"$NUSHELL_SCRIPTS_PATH/atuin.nu"
starship init nu >|"$NUSHELL_SCRIPTS_PATH/starship.nu"
mise activate nu >|"$NUSHELL_SCRIPTS_PATH/mise.nu"
